<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <meta name="theme-color" content="#EF5350" />

  <title>Dash</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="node_modules/lockr/lockr.min.js"></script>
  <script type="text/javascript" src="js/storage.js"></script>
  <script type="text/javascript">
    function updateFoods(){
      var foodItem = "<tr><td>%name%</td><td>%calories%</td></tr>"
      var foodList = Lockr.get('foods');
      for (var i = 0; i < foodList.length; i++) {
        $('#today').append(foodItem.replace("%name%", foodList[i].name).replace("%calories%", foodList[i].cal));
      }
    }
    function addFoodItem(){
      var calories = parseInt($('#calories').val());
      var mealName = $('#meal_name').val();
      addFood(mealName, calories, "Test");
      $("#today").empty();
      Materialize.toast('Food item has been added.', 5000);
      updateFoods();
    }
    function updateTotalCalories(){
      $('#total_calories').html(getTotalCalories());  
    }
    $(document).ready(function() {
      updateFoods();
      updateTotalCalories();
    });
  </script>
</head>
<body>
  <div class="navbar-fixed">
  <nav class="red lighten-1" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="#" class="brand-logo">Dash</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="index.html">Home</a></li>
        <li><a href="future.html">Scheduled Runs</a></li>
        <li><a href="past.html">Run Log</a></li>
        <li><a href="diary.html">Food Diary</a></li>
        <li><a href="#">Settings</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <div id="sidebar-header">
          <div class="row"> 
            <div class="col sm5">
              <img class="profile-thumbnail circle" src="img/shoe-final.jpg" height=40 width=40>
            </div>
            <div class="acct-info col sm7">
              <h6>Eva Person  
                <p>
                  <small>eva.person@domain.com</small> 
                </p>
              </h6>
            </div> 
          </div>
        </div>
        <li><a href="index.html">Home</a></li>
        <li><a href="future.html">Scheduled Runs</a></li>
        <li><a href="past.html">Run Log</a></li>
        <li><a href="diary.html">Food Diary</a></li>
        <li><a href="plan.html">Plan a Run</a></li>
        <li><a href="goals.html">Goals & Progress</a></li>
        <li><a href="#">Settings</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  </div>

  <div class="container">
    <div class="section">
    <div class="row">
      <div class="col s12 ">
        <div class="card-panel cal-panel cyan">
          <span class="white-text">
              <div id="cal-title">Calories Consumed Today</div>
              <h3 id="total_calories"></h3>
          </span>
        </div>
      </div>
      </div>
      <div class="banner">
          <h5>Today</h5>
      </div>
      <table class="highlight">
              <thead>
                <tr>
                    <th data-field="id">Food Item</th>
                    <th data-field="name">Calories</th>
                </tr>
              </thead>
              <tbody id="today">
              </tbody>
    </table>
     <div class="banner">
          <h5>Yesterday</h5>
      </div>
      <table class="highlight">
              <thead>
                <tr>
                    <th data-field="id">Food Item</th>
                    <th data-field="name">Calories</th>
                </tr>
              </thead>
              <tbody id="yesterday">
                <tr>
                  <td>Egg McMuffin</td>
                  <td>300</td>
                </tr>
                <tr>
                  <td>Hashbrown</td>
                  <td>200</td>
                </tr>
                <tr>
                  <td>Tea</td>
                  <td>20</td>
                </tr>
              </tbody>
            </table>
      
    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
       <a class="modal-trigger waves-effect waves-light btn-floating btn-large red" href="#modal1">
          <i class="large material-icons">add</i>
       </a>
    </div>
    
    <div id="modal1" class="modal modal-fixed-footer">
      <div class="modal-header cyan">
         <h5 class = "white-text">Add Food Item</h5>
      </div>
      <div class="modal-content">
          <div class="row">
            <form class="col s12">
              <div class="row">
                <div class="input-field col s12">
                  <input placeholder="Cookies" id="meal_name" type="text" >
                  <label for="meal_name">Meal Name</label>
                </div>
              </div>
              
              <div class="row">
                 <div class="col s12">
                   <label>Meal Type</label>
                    <select class="browser-default">
                      <option value="" disabled selected>Choose meal type</option>
                      <option value="1">Breakfast</option>
                      <option value="2">Lunch</option>
                      <option value="3">Dinner</option>
                      <option value="4">Snack</option>
                    </select>
                </div>
              </div>
                <div class="row">
                  <div class="input-field col s12">
                    <input placeholder="200" id="calories" type="text" >
                    <label for="calories">Calories</label>
                  </div>
                </div>
            </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="modal-action modal-close waves-effect waves-green btn-flat" onclick="addFoodItem()">OK</button>
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">CANCEL</a>
      </div>
  </div>
    
  
    </div>
  </div>

  <!--  Scripts-->
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

  </body>
</html>
